---
title: "Exploratory Data Analysis"
subtitle: "PSTAT 131"
author: "Isabella Escamilla"
date: "3/18/23"
output:
  html_document:
    toc: true
    toc_float: true
    code_folding: show
---

<style type = "text/css">
  body{
  font-family: trebuchet ms, sans-serif;
}
.list-group-item.active, .list-group-item.active:focus, .list-group-item.active:hover {
    background-color: lightcoral;
}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE,
                      warning = FALSE, eval = TRUE)
library(tidyverse)
library(ggplot2)
library(extrafont)
library(showtext)

```

```{r, include=FALSE}
loadfonts(device='win', quiet = FALSE)
font_add('trebuchet', 'C:/windows/fonts/trebuc.ttf')
showtext_auto()
```

```{r, include=FALSE}
theme_polyvore <- function(){
  font <- 'trebuchet'
  
  theme_minimal() %+replace%
    
    theme(
      # grid elements
      #panel.grid.major = element_blank(),
      panel.grid.minor = element_blank(),
      axis.ticks = element_blank(),
      axis.line = element_line(),
      
      # text elements
      plot.title = element_text(
        family = font,
        size = 24,
        face = 'bold',
        hjust = 0,
        vjust = 2,
        margin = margin(b=5, t=5)),
      
      plot.subtitle = element_text(          #subtitle
                   family = font,            #font family
                   size = 14),               #font size
      
      plot.caption = element_text(           #caption
                   family = font,            #font family
                   size = 9,                 #font size
                   hjust = 1),               #right align
      
      axis.title = element_text(             #axis titles
                   family = font,            #font family
                   size = 20),               #font size
      
      axis.text = element_text(              #axis text
                   family = font,            #axis family
                   size = 16),                #font size
      
      axis.text.x = element_text(            #margin for axis text
                    margin=margin(5, b = 10)),
      
      axis.title.y = element_text(margin=margin(b=10, r=10), angle=90)
      

    )
}
```


## Exploratory Data Analysis
Now that we've tidied the data in a format that will be better suited for our analysis, we can begin by making some plots and seeing how the data is distributed.

First we will import the data and convert the appropriate variables into categorical data.

```{r}
# Reading the tidied data into R
outfits <- read.csv('tidy_data.csv')

# converting all character columns into factors
outfits[sapply(outfits, is.character)] <- lapply(outfits[sapply(outfits, is.character)], as.factor)
# I will only be using set_id to retrieve photos, so we will leave it be

outfits %>% head(3)
```


In the final data set, there are 14 variables:

Name | Variable description
---|---
`views` | The number of times an outfit has been viewed
`likes` | The number of likes an outfit received **(the response variable)**
`set_id` | identifies the particular outfit
`item_1` - `item_8` | gives the name of the item type for up to 8 items in an outfit
`color_1` - `color_4` | gives the unique colors found in the outfit for up to 4 different colors


### Likes
We will start by looking at the distribution of our response variable, `likes`.


```{r}
outfits %>% 
  ggplot(aes(x = likes)) + 
  geom_histogram(binwidth = 100, fill="#3b252c") +
  labs(y = 'Number of Likes', x = 'Count', title = 'Distribution of the Number of Likes') +
  coord_cartesian(xlim = c(0, 4000)) +
  theme_polyvore()
```

We can see from this plot that the number of likes ranges from 0 to around 3000, and that the number of outfits decreases exponentially as the number of likes goes up. This follows the sort of logic you'd expect, where a select few get lots of likes while most go unseen.

### Items (Clothing Articles)
Looking at the data, we can see that `item_1` is generally the primary item of the outfit. This can be inferred by the types of items seen in this category: shirts, dresses, coats, etc. We can confirm this by looking at the frequency of items in `item_1`.

```{r}
# Finds the number of unique items in item_1 column
outfits$item_1 %>% unique() %>% length()
```
```{r}
outfits %>% ggplot(aes(x = fct_infreq(item_1))) +
  geom_bar(fill = '#F08080') +
  labs(x = 'Item 1', title = 'Frequencies of item_1 Items') +
  theme_polyvore() +
  theme(axis.text.x = element_blank(), 
        panel.grid.major.x = element_blank(), 
        axis.line = element_blank())
```

From this plot, we can see that there are some items that are repeated a lot in the `item_1` slot, whereas others are more rare. Since there are 229 unique items present in this column, I've suppressed the item name text so that we can see the distribution better. 

To get a better look at the most frequent items seen in this slot, we will look at a bar plot of the top 10 `item_1` items by frequency.

```{r}
item1_t10 <- (sort(table(outfits$item_1), decreasing = TRUE) %>% names)[1:10]
outfits_item1_top10 <- outfits[outfits$item_1 %in% item1_t10,]

outfits_item1_top10 %>% 
  ggplot(aes(x = fct_infreq(item_1))) +
  geom_bar(fill="#2c514c") +
  labs(x = 'Item 1', title = 'Frequencies of Top 10 item_1 Items') +
  theme_polyvore() +
  theme(axis.text.x = element_text(margin=margin(b = 10), size = 12),
        axis.line = element_blank())
```

